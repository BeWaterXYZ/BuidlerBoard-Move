# å®ç°ä¸€ä¸ª On-Chain-Buidlerboard | Day 0x01

> Web2 ç‰ˆæœ¬ Buidlerboard å…¥å£ï¼š
>
> https://buidlerboard.bewater.pro

åœ¨è¿‡å»å…³äº #BeWater çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ›¾ç»æåˆ° [è®¾è®¡ã€Œä¼—äººç»´æŠ¤ã€çš„ BuidlerBoard](https://mp.weixin.qq.com/s/KUTcz4xrlhSdckQnLSsqsg)ã€‚

å…¶ä¸­æåˆ° Buidlerboard çš„æœªæ¥å‘å±•æ–¹å‘ï¼š

* é¡¹ç›®æäº¤å…¥å£ï¼ˆå·²å®ç°ï¼‰
* åˆ’åˆ†å‡º Github BuidlerBoard å’Œ BeWater Projects BuidlerBoard ä¸¤ä¸ªç‰ˆæœ¬ï¼ˆTODOï¼‰
* ç®—æ³•æ›´æ–°ï¼ˆTODOï¼‰
* **é“¾ä¸ŠåŒ–**

æ­£å¥½å½“å‰ Dorahack Aptos Grant åˆ°è¾¾  Round 8ï¼š

> https://dorahacks.io/aptos

![image-20250509232229252](https://p.ipic.vip/yqj721.png)

å€Ÿè¿™ä¸ªæœºä¼šï¼Œæˆ‘æ­£å¥½ç»™å¤§å®¶ **ã€Œç›´æ’­ã€** æˆ‘ Buidl ä¸€ä¸ª Hackathon é¡¹ç›®çš„è¿‡ç¨‹ã€‚

> **åŸåˆ™**
>
> ä¾æ—§éµå¾ªä¸€ç›´ä»¥æ¥çš„åŸåˆ™ï¼š**å³ä½¿æ˜¯ Hackathon ä¹Ÿä¸€å®šåšçš„æ˜¯æœ¬æ¥å°±åœ¨è‡ªå·±è§„åˆ’ä¸­çš„é¡¹ç›®ï¼Œä¸è¦å˜æˆ Hackathon Hunterã€‚** å› ä¸º Hackathon çš„ä¸ç¡®å®šæ€§å¤ªå¤§äº†ã€‚

## 0x01 æ ¸å¿ƒæ€è€ƒğŸ¤”

### 1.1 Why Buidlerboard?

ç›¸å¯¹äºåŠŸèƒ½æ›´å¤æ‚çš„ Hackathon Platform æ¥è¯´ï¼ŒBuidlerboard æ›´ç¬¦åˆ Hackathon Hodlersã€Buidlers å’Œ Sponsors çš„**ã€Œåˆšéœ€ã€**ã€‚

> **é—®ï¼š** Hackathon Hodlersã€Buidlers å’Œ Sponsors çš„ã€Œ1st åˆšéœ€ã€åˆ†åˆ«ä»€ä¹ˆï¼Ÿ
>
> 1st åˆšéœ€ â€”â€” åœ¨éœ€æ±‚é‡Œé¢æœ€é‡è¦çš„é‚£ **ä¸€** ä¸ªã€‚

### 1.2 Why On-Chain?

å®è·µä¸€ä¸ªé“¾ä¸Šçš„ Buidlerboard æœ‰å¾ˆå¤šå¥½å¤„ï¼š

1/ ä¸å†å­˜åœ¨ä¼ ç»Ÿ Web2 App çš„æ•°æ®ä¸¢å¤±é£é™©ï¼Œå®ç°ä¸åˆ›å»ºäººè§£è€¦çš„ **ã€Œæ•°æ®æ°¸å­˜ã€**ã€‚

2/ å¯ä»¥ä¸å…¶ä»–åˆçº¦è¿›è¡Œé“¾ä¸Šäº¤äº’ï¼Œæä¾›ã€Œä¹é«˜ç§¯æœ¨å¼ã€çš„å¯ç»„åˆç©æ³•ï¼Œå‘æŒ¥ **DevGC** çš„æƒ³è±¡ç©ºé—´ã€‚

æ­¤å¤–ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®ä¾‹ï¼Œå±•ç°åŸºäºä¼ ç»Ÿæ•°æ®åº“çš„åº”ç”¨æ˜¯å¦‚ä½•å‘ Web3 dApp è¿›è¡Œè¿ç§»çš„ã€‚

## 0x02 ä» Web2 App åˆ° Web3 dApp

Buidlerboard æ˜¯å¾ˆå…¸å‹çš„é“¾æ”¹åº”ç”¨ã€‚æˆ‘ä»¬é€šè¿‡ä¸¤å¼ å›¾æ¥æ¥çœ‹çœ‹å˜åŒ–ã€‚

åŸæœ‰çš„ App æ¶æ„ï¼š

```bash
   +--------------------+
   | Frontend on Vercel |
   +--------------------+
              â†•
+--------------------------+
| Typescript Funcs on Deno |
+--------------------------+
        â†•          â†‘
  +-----------+    | Common
  | SQL Funcs |    | CRUD
  +-----------+    |
        â†•          â†“
+-----------------------+
| Projects | Hackathons |
+-----------------------+
| Database on Supabase  |
+-----------------------+
```

è¿™ä¹Ÿæ˜¯éå¸¸é€‚åˆç‹¬ç«‹å¼€å‘è€…çš„ä¸€ç§ä½æˆæœ¬çš„ App æ¶æ„â€¦â€¦ä¹‹åä¼šä¸“é—¨å¼€æ–‡ç« æˆ–è€…ä¸“æ æ¥é˜è¿°åœ¨è¿™ä¸ªæ¶æ„ä¸‹çš„å¼€å‘å®è·µğŸŒ¹ã€‚

åœ¨å‘é“¾ä¸Šè¿ç§»ä¹‹åï¼š

```bash
          +--------+  +--------------------+
          |  APIs  |  | Frontend on Vercel |
          +--------+  +--------------------+
              â†• Interact        â†‘
+--------------------------+    | Interact
| Typescript Funcs on Deno |    |
+--------------------------+    |
              â†•â†•â†• Interact      â†“
  +-----------+ +------------+ +-----------------+
  | Init Func | | View Funcs | | Pub Entry Funcs | Smart Contract Funcs
  +-----------+ +------------+ +-----------------+
        â†“ init       â†“ Read      â†“ CW
+--------------------------------+       
| Projects Aggr | Hackathon Aggr |
+--------------------------------+
|    Projects    |   Hackathons  |
+--------------------------------+
|  Structs on Aptos Framework    |
+--------------------------------+
```

æˆ‘ä»¬è¿›è¡Œäº†å¦‚ä¸‹å˜åŠ¨ï¼š

* **Database => Struct on Aptos**

  ä»ä¼ ç»Ÿæ•°æ®åº“ä¸­çš„è¡¨è¿ç§»ä¸º Aptos ä¸­çš„ç»“æ„ä½“ã€‚

* **SQL Funcs & Typescript Funcs => Smart Contract Funcs** 

  ä»ä¼ ç»Ÿçš„åç«¯å‡½æ•°è¿ç§»ä¸ºæ™ºèƒ½åˆçº¦ä¸­çš„å‡½æ•°ã€‚

  > **ğŸ’¡ Aptos ä¸­çš„å‡½æ•°**
  >
  > private - Move ä¸­çš„å‡½æ•°é»˜è®¤ä¸ºç§æœ‰å‡½æ•°ï¼ˆè¿™æ„å‘³ç€å®ƒä»¬åªèƒ½åœ¨åŒä¸€æ¨¡å—å†…è°ƒç”¨ï¼Œæ¨¡å—å¤–éƒ¨çš„å…¶ä»–æ¨¡å—å’Œè„šæœ¬æ— æ³•è®¿é—®ï¼‰ã€‚
  >
  > public - å…¬å…±å‡½æ•°å¯ä»¥è¢«ä»»ä½•æ¨¡å—æˆ–è„šæœ¬ä¸­çš„ä»»ä½•å‡½æ•°è°ƒç”¨ã€‚
  >
  > public(friend) - å…¬å…±å‡½æ•°å¯ä»¥è¢«åŒä¸€æ¨¡å—ä¸­çš„ä»»ä½•å‡½æ•°ä»¥åŠåœ¨å‹å…ƒåˆ—è¡¨ä¸­æ˜ç¡®å®šä¹‰çš„æ¨¡å—å‡½æ•°è°ƒç”¨ã€‚
  >
  > entry - å…¥å£å‡½æ•°ï¼Œä¹Ÿå³å¤–éƒ¨å¯è°ƒã€‚
  >
  > 
  >
  > view - è¿˜å¯ä»¥ç»™ public å‡½æ•°åŠ ä¸Š view ä¿®é¥°ç¬¦ï¼Œè¿™æ ·çš„è¯æ˜¯å¤–éƒ¨å¯è°ƒç”¨çš„åªè¯»å‡½æ•°ã€‚

* **Typescript Funcs on Deno**

  ä¾ç„¶ä¿ç•™ Deno Funcs è¿™ä¸€è®¾è®¡ï¼Œä¸€æ–¹é¢æä¾›æŸäº›åœºæ™¯ä¸‹éœ€è¦çš„åç«¯èƒ½åŠ›ï¼Œä¾‹å¦‚ä¸€äº›é“¾ä¸‹è®¡ç®—ï¼›å¦ä¸€æ–¹é¢åœ¨æœ‰éœ€è¦æ—¶ä¸ºæ‰˜ç®¡ç”¨æˆ·æä¾›æœåŠ¡ã€‚

* **Frontend on Vercel**

  å‰ç«¯ä»å’Œåç«¯äº¤äº’è½¬å˜ä¸ºå’Œåˆçº¦äº¤äº’ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨ä»£ç ä¸Šå‚è€ƒ`scaffold-move`ï¼š

  > https://github.com/NonceGeek/scaffold-move

## 0x03 çŸ¥è¯†ç‚¹ï¼šç»“æ„ä½“ã€èƒ½åŠ›ä¸å¯¹è±¡

åœ¨è¿™é‡Œè¡¥å……ä¸€äº›å…³äº Aptos çš„åŸºç¡€çŸ¥è¯†ï¼š

ğŸ’¡**Aptos ä¸­çš„ç»“æ„ä½“ï¼ˆStructï¼‰**

åœ¨ Move ä¸­ï¼Œç»“æ„ä½“æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå°è£…ç›¸å…³å­—æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æ„ä½“å…·æœ‰çº¿æ€§å’Œä¸´æ—¶æ€§ï¼Œæ„å‘³ç€å®ƒä»¬ä¸èƒ½è¢«å¤åˆ¶ã€ä¸¢å¼ƒæˆ–å­˜å‚¨åœ¨å…¨å±€å­˜å‚¨ä¸­ï¼Œé™¤éæ˜¾å¼èµ‹äºˆç‰¹å®šèƒ½åŠ›ã€‚



ğŸ’¡**èƒ½åŠ›ï¼ˆAbilitiesï¼‰**

ç»“æ„ä½“å¯ä»¥é€šè¿‡ä»¥ä¸‹èƒ½åŠ›è¿›è¡Œæ³¨è§£ï¼Œä»¥æ§åˆ¶å…¶è¡Œä¸ºï¼š

- **copy**ï¼šå…è®¸å®ä¾‹è¢«å¤åˆ¶ã€‚
- **drop**ï¼šå…è®¸å®ä¾‹åœ¨è¶…å‡ºä½œç”¨åŸŸæ—¶è¢«ä¸¢å¼ƒã€‚
- **store**ï¼šå…è®¸å®ä¾‹å­˜å‚¨åœ¨å…¨å±€å­˜å‚¨ä¸­ã€‚
- **key**ï¼šå°†ç»“æ„ä½“æ ‡è®°ä¸ºå…¨å±€å­˜å‚¨æ“ä½œçš„é”®ï¼Œå…è®¸å…¶åœ¨å…¨å±€èŒƒå›´å†…å­˜å‚¨å’Œè®¿é—®ã€‚

ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ `struct MyStruct has key, store { ... }`ï¼Œå³å¯å°†å…¶å®ä¾‹å­˜å‚¨åœ¨å…¨å±€å­˜å‚¨ä¸­ï¼Œå¹¶ä½œä¸ºè®¿é—®èµ„æºçš„é”®ä½¿ç”¨ã€‚

å¦‚æœæœªèµ‹äºˆè¿™äº›èƒ½åŠ›ï¼Œç»“æ„ä½“å°†ä»…é™äºå…¶å®šä¹‰çš„æ¨¡å—å†…ä½¿ç”¨ï¼Œæ— æ³•åœ¨å…¨å±€èŒƒå›´å†…å­˜å‚¨æˆ–æ“ä½œã€‚



ğŸ’¡**å¯¹è±¡ï¼ˆObjectï¼‰**

Aptos å¼•å…¥äº†å¯¹è±¡æ¨¡å‹ï¼Œä½¿å¾— Move èƒ½å¤Ÿå°†ä¸€ç»„ä¸åŒçš„å¤æ‚ç±»å‹è¡¨ç¤ºä¸ºå­˜å‚¨åœ¨å•ä¸ªåœ°å€ä¸­çš„èµ„æºé›†åˆã€‚

å¯¹è±¡æ¨¡å‹çš„æ ¸å¿ƒç»“æ„ä¸º ObjectCoreï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

```rust
struct ObjectCore has key {
    guid_creation_num: u64,
    owner: address,
    allow_ungated_transfer: bool,
    transfer_events: event::EventHandle<TransferEvent>,
}
```

* **guid_creation_num**ï¼šå”¯ä¸€æ ‡è¯†ç¬¦ã€‚
* **owner**ï¼šæ‰€æœ‰è€…çš„åœ°å€ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡æˆ–è´¦æˆ·ï¼‰ã€‚
* **allow_ungated_transfer**ï¼šå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå¯¹è±¡æ˜¯å¦å…è®¸è½¬ç§»ã€‚
* **transfer_events**ï¼šæ¯å½“å‘ç”Ÿè½¬ç§»æ—¶å‘å‡ºçš„äº‹ä»¶å¥æŸ„ã€‚ 

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯¹è±¡å¯ä»¥åŒ…å«å„ç§å…ƒç´ ï¼Œä¾‹å¦‚ NFTã€ä»£å¸å’Œæ¸¸æˆä¸­çš„ç©å®¶å¯¹è±¡ç­‰ä¸“ç”¨æ•°æ®ç»“æ„ã€‚

## 0x04 åˆçº¦å®ç°

é¦–å…ˆæ¥å®ç°ä¸€ç‰ˆåˆçº¦ï¼Œå…ˆæœ‰æ•°æ®ç»“æ„å’Œæœ€åŸºç¡€çš„å‡½æ•°ã€‚

æºç åœ°å€ï¼š

> https://github.com/BeWaterXYZ/BuidlerBoard-Move/tree/main/contracts

> ğŸ’¡æˆ‘çš„ä¹ æƒ¯æ˜¯å°†åˆçº¦å¤åˆ¶åˆ° aptos å®˜æ–¹ä»“åº“ä¸‹çš„`aptos-core/aptos-move/move-examples` è¿™ä¸ªç›®å½•é‡Œè¿›è¡Œå¼€å‘ï¼Œå¼€å‘å®Œä¹‹åå†å¤åˆ¶å›åŸä»“åº“ã€‚è¿™æ ·çš„è¯æœ‰å¤§é‡å®˜æ–¹ç¤ºä¾‹åˆçº¦ä»£ç å’Œè‡ªå·±å†™è¿‡çš„æ‰€æœ‰åˆçº¦ä»£ç ï¼Œå¯¹ AI ç¼–ç¨‹éå¸¸å‹å¥½ã€‚

### 4.1 è®¾è®¡ç»“æ„ä½“

```rust
 //:!:>resource
  struct Hackathon has key, store, drop, copy {
      unique_id: u64,
      // only owner can update the hackathon.
      owner: address,
      name: string::String,
      description: string::String,
      start_date: u64,
      end_date: u64,
      winners: vector<u64>,
      comments: vector<string::String>,
  }

  struct HackathonAggregator has key {
      max_id: u64,
      hackathons: vector<Hackathon>,
      // add_hackathon_events: event::EventHandle<AddHackathonEvent>,
      // update_hackathon_events: event::EventHandle<UpdateHackathonEvent>
  }

  struct ProjectAggregator has key {
      max_id: u64,
      projects: vector<Project>,
      // add_project_events: event::EventHandle<AddProjectEvent>,
      // update_project_events: event::EventHandle<UpdateProjectEvent>
  }

  struct Project has key, store, drop, copy {
      // basic info
      unique_id: u64,
      name: string::String,
      category: string::String,
      github_url: string::String,
      owner: address,
      created_at: u64,
      updated_at: u64,

      // more info
      demo_url: string::String,
      deck_url: string::String,
      intro_video_url: string::String,

      // activities
      activities: vector<Hackathon>,
  }
  //<:!:resource
```

å®šä¹‰äº† `Hackathon` å’Œ `Project` ä¸¤ä¸ªç»“æ„ä½“ï¼Œç›¸å½“äºä¼ ç»Ÿæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ã€‚

ç„¶åå®šä¹‰äº† `HackathonAggregator` ä¸ `ProjectAggregator`ï¼Œç”¨äºå­˜å‚¨ `Hackathons` å’Œ `Projects`ã€‚

### 4.2 åˆå§‹åŒ–å‡½æ•°

```rust
    //:!:>init
    // This is only callable during publishing.
    fun init_module(account: &signer) {
        move_to(account, HackathonAggregator {
            max_id: 0,
            hackathons: vector::empty(),
        });
        move_to(account, ProjectAggregator {
            max_id: 0,
            projects: vector::empty(),
        });
    }
    //<:!:init
```

åœ¨è¿™ä¸ªå‡½æ•°é‡Œæˆ‘ä»¬åˆå§‹åŒ– `HackathonAggregator` å’Œ `ProjectAggregator`ï¼Œå¹¶å°†å…¶è½¬ç§»åˆ°åˆçº¦è´¦å·ä¸‹ã€‚å’Œ EVM ä½“ç³»ä¸åŒï¼Œåœ¨ Aptos ä¸­åˆçº¦è´¦å·å³éƒ¨ç½²è€…çš„è´¦å·ã€‚

### 4.3 åªè¯»å‡½æ•°

```rust
		// :!:>view
    #[view]
    public fun get_hackathons_max_id(): u64 acquires HackathonAggregator {
        borrow_global<HackathonAggregator>(@my_addr).max_id
    }

    #[view]
    public fun get_hackathons(): vector<Hackathon> acquires HackathonAggregator {
        borrow_global<HackathonAggregator>(@my_addr).hackathons
    }

    #[view]
    public fun get_hackathon(unique_id: u64): Hackathon acquires HackathonAggregator {
        borrow_global<HackathonAggregator>(@my_addr).hackathons[unique_id]
    }

    #[view]
    public fun get_projects_max_id(): u64 acquires ProjectAggregator {
        borrow_global<ProjectAggregator>(@my_addr).max_id
    }

    #[view]
    public fun get_projects(): vector<Project> acquires ProjectAggregator {
        borrow_global<ProjectAggregator>(@my_addr).projects
    }

    #[view]
    public fun get_project(unique_id: u64): Project acquires ProjectAggregator {
        borrow_global<ProjectAggregator>(@my_addr).projects[unique_id]
    }
    //<:!:view
```

é€šè¿‡åªè¯»å‡½æ•°å¯ä»¥æ‹¿åˆ°å…¨éƒ¨çš„  `hackathons` å’Œ  `projects` æ•°æ®ï¼Œä»¥åŠé€šè¿‡ unique_id æ‹¿åˆ°å•ä¸ªçš„ `hackathon` å’Œ `project` æ•°æ®ã€‚

### 4.4 public entry å‡½æ•°

ä¹Ÿå°±æ˜¯å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨çš„å‡½æ•°ï¼š

```rust
   //:!:>entry fun
    
    // Add a hackathon to the buidlerboard.
    public entry fun add_hackathon(
        account: &signer, 
        name: string::String, 
        description: string::String, 
        start_date: u64, 
        end_date: u64) acquires HackathonAggregator {
        let hackathon_aggr = borrow_global_mut<HackathonAggregator>(@my_addr);
        hackathon_aggr.max_id = hackathon_aggr.max_id + 1;
        hackathon_aggr.hackathons.push_back(Hackathon {
            unique_id: hackathon_aggr.max_id,
            name: name,
            description: description,
            owner: signer::address_of(account),
            start_date: start_date,
            end_date: end_date,
            winners: vector::empty(),
            comments: vector::empty(),
        });
    }

    // Add a project to the buidlerboard.

    public entry fun add_project(
        account: &signer, 
        name: string::String, 
        category: string::String,
        github_url: string::String, 
        demo_url: string::String, 
        deck_url: string::String, 
        intro_video_url: string::String) acquires ProjectAggregator {
        let project_aggr = borrow_global_mut<ProjectAggregator>(@my_addr);
        project_aggr.max_id = project_aggr.max_id + 1;
        project_aggr.projects.push_back(Project {
            unique_id: project_aggr.max_id,
            name: name,
            category: category,
            github_url: github_url,
            owner: signer::address_of(account),
            created_at: timestamp::now_seconds(),
            updated_at: timestamp::now_seconds(),
            demo_url: demo_url,
            deck_url: deck_url,
            intro_video_url: intro_video_url,
            activities: vector::empty(),
        });
    }
    //<:!:entry fun
```

è¿™é‡Œçš„å®ç°æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š

* `borrow_global_mut`ï¼šä»åˆçº¦è´¦æˆ·ä¸‹æŠŠ `*Aggregator` ç»™å€Ÿäº†å‡ºæ¥ã€‚
* è®¾ç½® `owner`ï¼šç»™æ¯ä¸ª `Project` å’Œ `Hackathon` éƒ½è®¾ç½®ä¸ª `owner`ï¼Œè¿™æ ·ä¾¿äºåç»­åšæ›´æ–°æ“ä½œçš„æ—¶å€™è¿›è¡Œæƒé™é‰´åˆ«ã€‚

## 0x05 åˆçº¦éƒ¨ç½²ä¸è°ƒç”¨è°ƒè¯•

æˆ‘çš„ä¹ æƒ¯æ˜¯ç”¨å‘½ä»¤è¡Œè¿›è¡Œç¼–è¯‘å’Œéƒ¨ç½²ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è¿›è¡Œè°ƒç”¨è°ƒè¯•ã€‚

* åˆ›å»ºæµ‹è¯•è´¦å·ï¼š

   ```bash
    aptos init --profile [profile_name]
   ```

* ç¼–è¯‘åˆçº¦ï¼š

  ```bash
  aptos move compile --package-dir ./buidlerboard  --named-addresses my_addr=[profile_name]
  ```

  ![image-20250510191913431](https://p.ipic.vip/gfjqvp.png)

* éƒ¨ç½²åˆçº¦ï¼š

  ```bash
  aptos move publish --package-dir ./buidlerboard --named-addresses my_addr=[profile_name] --profile [profile_name]
  ```

  ![image-20250510192013120](https://p.ipic.vip/gr9e34.png)

ç„¶åæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼Œå°±èƒ½åœ¨æµè§ˆå™¨ä¸­ç›´æ¥å’Œåˆçº¦è¿›è¡Œäº¤äº’äº†ï¼

> https://explorer.aptoslabs.com/account/0x2378e31bc26587e1f9cec5afbc1b5abe92833c4eab9e184b3678e3635e505d9f/modules/run/buidlerboard/add_project?network=testnet



